{% extends "base.html" %}

{% block title %}Ranking Methodology - College Football Rankings{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="text-center mb-4">
            <h2 class="text-primary">üß™ Scientific Ranking Methodology</h2>
            <p class="text-muted">How our advanced ranking system evaluates college football teams</p>
        </div>

        <!-- Overview -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0">System Goals</h3>
            </div>
            <div class="card-body">
                <p>Our ranking system is designed to:</p>
                <ul>
                    <li><strong>Predict head-to-head matchups:</strong> Who would win if two teams played today?</li>
                    <li><strong>Reward season-long excellence:</strong> Consistent performance over the full season matters</li>
                    <li><strong>Use pure mathematics:</strong> No subjective opinions, just objective data analysis</li>
                </ul>
                <p class="mb-0">Unlike traditional polls that rely on human voters or simple win-loss records, our system analyzes the <em>quality</em> and <em>context</em> of every game played.</p>
            </div>
        </div>

        <!-- Main Components -->
        <div class="card mb-4">
            <div class="card-header bg-success text-white">
                <h3 class="mb-0">üèÜ Victory Value System</h3>
            </div>
            <div class="card-body">
                <p>Not all wins are created equal. Each victory is scored based on:</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h5>Opponent Quality (1-10 scale)</h5>
                        <ul>
                            <li>Dynamic rating based on opponent's wins, losses, and who <em>they</em> beat</li>
                            <li>Beating an 8-1 ranked team worth much more than beating a 2-7 team</li>
                            <li>Updates throughout season as opponent records develop</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>Game Context</h5>
                        <ul>
                            <li><strong>Location:</strong> Road wins worth 30% more, neutral sites 15% more</li>
                            <li><strong>Margin:</strong> Winning by 14+ shows dominance, but diminishing returns after 21</li>
                            <li><strong>Conference:</strong> G5 teams beating P4 teams get major bonus</li>
                        </ul>
                    </div>
                </div>
                
                <div class="alert alert-success mt-3">
                    <strong>Example:</strong> Beating #5 Georgia by 10 points on the road might be worth 12+ points, while beating a 3-5 team by 3 at home might only be worth 4 points.
                </div>
            </div>
        </div>

        <!-- Loss Assessment -->
        <div class="card mb-4">
            <div class="card-header bg-warning text-dark">
                <h3 class="mb-0">üíî Loss Quality Assessment</h3>
            </div>
            <div class="card-body">
                <p>How you lose matters as much as whether you lose:</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h5>Low-Penalty Losses</h5>
                        <ul>
                            <li>Close losses (1-3 points) to top-15 teams</li>
                            <li>Road losses to quality opponents</li>
                            <li>Overtime/last-second defeats</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>High-Penalty Losses</h5>
                        <ul>
                            <li>Home losses by large margins</li>
                            <li>Losses to significantly weaker opponents</li>
                            <li>Blowout defeats (21+ points)</li>
                        </ul>
                    </div>
                </div>
                
                <div class="alert alert-warning mt-3">
                    <strong>Example:</strong> Losing by 3 to #1 Alabama on the road barely hurts your ranking, while losing by 20 to an unranked team at home is a major penalty.
                </div>
            </div>
        </div>

        <!-- FCS Game Policy -->
        <div class="card mb-4">
            <div class="card-header bg-secondary text-white">
                <h3 class="mb-0">üéì FCS Game Policy</h3>
            </div>
            <div class="card-body">
                <p>Games against FCS (Football Championship Subdivision) opponents are treated as "gimme" wins with severely limited ranking credit and <strong>do not count toward bowl eligibility</strong>:</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h5>FCS Game Penalties</h5>
                        <ul>
                            <li><strong>Bowl Eligibility:</strong> FCS wins don't count toward 6-win requirement</li>
                            <li><strong>Opponent Quality:</strong> Fixed at 0.5/10 (extremely low)</li>
                            <li><strong>No Location Bonus:</strong> Road wins vs FCS get no extra credit</li>
                            <li><strong>Minimal Margin Bonus:</strong> Maximum 0.2 points regardless of score</li>
                            <li><strong>No Conference/Rivalry Bonuses:</strong> FCS games can't be rivalries</li>
                            <li><strong>Hard Cap:</strong> Maximum 1.0 total victory points</li>
                        </ul>
                        
                        <h5 class="mt-3">Bowl Eligibility Examples</h5>
                        <table class="table table-sm">
                            <tr>
                                <td>Team A: 6-6 (all FBS wins)</td>
                                <td class="text-success"><strong>Bowl Eligible ‚úÖ</strong></td>
                            </tr>
                            <tr>
                                <td>Team B: 6-6 (5 FBS + 1 FCS)</td>
                                <td class="text-danger"><strong>Not Eligible ‚ùå</strong></td>
                            </tr>
                            <tr>
                                <td>Team C: 7-5 (6 FBS + 1 FCS)</td>
                                <td class="text-success"><strong>Bowl Eligible ‚úÖ</strong></td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <h5>Victory Value Comparison</h5>
                        <table class="table table-sm">
                            <tr>
                                <td>Beat Top-10 Team (Road)</td>
                                <td class="text-success"><strong>10+ points</strong></td>
                            </tr>
                            <tr>
                                <td>Beat Average P4 Team (Home)</td>
                                <td class="text-primary"><strong>5-7 points</strong></td>
                            </tr>
                            <tr>
                                <td>Beat Good G5 Team (Road)</td>
                                <td class="text-info"><strong>4-6 points</strong></td>
                            </tr>
                            <tr>
                                <td>Beat FCS Team by 50</td>
                                <td class="text-muted"><strong>0.7 points</strong></td>
                            </tr>
                        </table>
                        
                        <h5 class="mt-3">FCS Calculation Example</h5>
                        <div class="small">
                            <p><strong>Beat FCS 42-7 at home:</strong></p>
                            <ul class="small">
                                <li>Base Value: 0.5 (quality) √ó 1.0 (no location bonus) = 0.5</li>
                                <li>Margin Bonus: 0.2 (capped regardless of 35-point win)</li>
                                <li>Conference Bonus: 0.0 (none for FCS)</li>
                                <li>Rivalry Bonus: 0.0 (FCS can't be rivals)</li>
                                <li><strong>Total: 0.7 points</strong> (vs 7+ for real teams)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-warning mt-3">
                    <strong>Why This Policy:</strong> FCS teams compete at a lower division level with smaller scholarships and budgets. While these games may help win totals, they don't count toward bowl eligibility and provide minimal ranking benefit. Teams must earn 6 wins against FBS-level competition to qualify for bowl games and demonstrate true strength.
                </div>
            </div>
        </div>

        <!-- Rivalry Bonus System -->
        <div class="card mb-4">
            <div class="card-header bg-danger text-white">
                <h3 class="mb-0">üî• Rivalry Bonus System</h3>
            </div>
            <div class="card-body">
                <p>College football rivalries carry special significance that goes beyond normal games. Our system recognizes this by awarding bonus points for beating traditional rivals.</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h5>Tier 1 Rivalries (+1.0 bonus)</h5>
                        <ul>
                            <li><strong>Alabama vs Auburn</strong> (Iron Bowl)</li>
                            <li><strong>Ohio State vs Michigan</strong> (The Game)</li>
                            <li><strong>Texas vs Oklahoma</strong> (Red River Showdown)</li>
                            <li><strong>Florida vs Georgia</strong> (World's Largest Outdoor Cocktail Party)</li>
                            <li><strong>Army vs Navy</strong></li>
                            <li><strong>USC vs UCLA</strong> (Battle for Los Angeles)</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>Regular Rivalries (+0.6 bonus)</h5>
                        <ul>
                            <li>Conference rivalries (e.g., NC State vs North Carolina)</li>
                            <li>Regional matchups (e.g., Virginia vs Virginia Tech)</li>
                            <li>Historic series (e.g., Stanford vs California)</li>
                            <li>Trophy games across all conferences</li>
                        </ul>
                    </div>
                </div>
                
                <div class="alert alert-danger mt-3">
                    <strong>Example:</strong> Auburn beating Alabama by 10 on the road gets 8.0 (opponent quality) √ó 1.3 (road bonus) + 1.2 (margin bonus) + 1.0 (rivalry bonus) = <strong>12.6 total victory points</strong> vs only 11.6 without the rivalry factor.
                </div>
                
                <p class="mb-0"><small class="text-muted">Rivalries are predefined based on traditional matchups, trophy games, and historic significance. The system tracks over 100+ rivalry pairs across all conferences.</small></p>
            </div>
        </div>

        <!-- Advanced Factors -->
        <div class="card mb-4">
            <div class="card-header bg-info text-white">
                <h3 class="mb-0">üìä Advanced Factors</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h5>Recent Form</h5>
                        <p>Teams that are "hot" or "cold" get appropriate adjustments. A team winning their last 4 games by larger margins than their season average gets a boost.</p>
                    </div>
                    <div class="col-md-4">
                        <h5>Consistency</h5>
                        <p>Reliable teams get a small bonus for predictability in head-to-head matchups. Teams with wildly inconsistent performance get a small penalty.</p>
                    </div>
                    <div class="col-md-4">
                        <h5>Games Played</h5>
                        <p>Teams with more games get a small bonus for having a larger body of work to evaluate (up to 13 games).</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- How It's Different -->
        <div class="card mb-4">
            <div class="card-header bg-secondary text-white">
                <h3 class="mb-0">üîÑ How This Differs from Other Systems</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5>Traditional Rankings</h5>
                        <ul>
                            <li>All P4 wins treated equally</li>
                            <li>All losses hurt the same</li>
                            <li>Location doesn't matter much</li>
                            <li>Recent form ignored</li>
                            <li>Rivalry games not differentiated</li>
                            <li>Human bias influences polls</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>Our Scientific System</h5>
                        <ul>
                            <li>Each opponent gets individual quality score</li>
                            <li>Loss context heavily considered</li>
                            <li>Road/neutral site games properly weighted</li>
                            <li>Teams getting hot/cold get adjustments</li>
                            <li>Rivalry wins receive meaningful bonuses</li>
                            <li>100% mathematical - no human bias</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sample Calculation -->
        <div class="card mb-4">
            <div class="card-header bg-dark text-white">
                <h3 class="mb-0">üßÆ Sample Team Breakdown</h3>
            </div>
            <div class="card-body">
                <h5>Hypothetical Team: 8-2 Record</h5>
                <div class="table-responsive">
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th>Value</th>
                                <th>Explanation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table-success">
                                <td>Victory Value</td>
                                <td>+44.1</td>
                                <td>8 wins including quality road victories + 1 rivalry win</td>
                            </tr>
                            <tr class="table-danger">
                                <td>Loss Penalty</td>
                                <td>-6.8</td>
                                <td>One close loss to top team, one bad home loss</td>
                            </tr>
                            <tr class="table-info">
                                <td>Recent Form</td>
                                <td>+1.2</td>
                                <td>Won last 3 games by increasing margins</td>
                            </tr>
                            <tr class="table-warning">
                                <td>Consistency</td>
                                <td>+0.3</td>
                                <td>Reliable performance vs similar opponents</td>
                            </tr>
                            <tr class="table-light">
                                <td>Games Played</td>
                                <td>+1.5</td>
                                <td>10 games played so far</td>
                            </tr>
                            <tr class="table-primary">
                                <td><strong>Final Score</strong></td>
                                <td><strong>40.3</strong></td>
                                <td>Total ranking score (rivalry win added +1.6 total)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- FAQ -->
        <div class="card mb-4">
            <div class="card-header bg-light">
                <h3 class="mb-0">‚ùì Frequently Asked Questions</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6><strong>Q: Why isn't the undefeated team #1?</strong></h6>
                        <p><small>A: An undefeated team with weak opponents might rank below a 1-loss team with several top-10 wins. Quality matters more than quantity.</small></p>
                        
                        <h6><strong>Q: How often do rankings update?</strong></h6>
                        <p><small>A: Rankings update immediately after each game is entered, including retroactive adjustments as opponent strength changes.</small></p>
                        
                        <h6><strong>Q: Which games count as rivalries?</strong></h6>
                        <p><small>A: Traditional rivalries like Alabama-Auburn, Ohio State-Michigan, plus conference rivals and trophy games. Over 100+ rivalry pairs are tracked across all levels.</small></p>
                    </div>
                    <div class="col-md-6">
                        <h6><strong>Q: Does strength of schedule matter?</strong></h6>
                        <p><small>A: Yes, but it's built into the opponent quality scores rather than calculated separately. Playing tough opponents naturally increases your victory values.</small></p>
                        
                        <h6><strong>Q: Can I see the detailed breakdown?</strong></h6>
                        <p><small>A: Click on any team name in the rankings to see their detailed game-by-game analysis and component scores.</small></p>
                        
                        <h6><strong>Q: How much do rivalry bonuses matter?</strong></h6>
                        <p><small>A: Rivalry wins provide meaningful but balanced bonuses (0.6-1.0 points). They won't dramatically change rankings but properly reward these important victories.</small></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Back Link -->
        <div class="text-center">
            <a href="{{ url_for('public_rankings') }}" class="btn btn-primary">
                <i class="fas fa-arrow-left"></i> Back to Rankings
            </a>
        </div>
    </div>
</div>
{% endblock %}